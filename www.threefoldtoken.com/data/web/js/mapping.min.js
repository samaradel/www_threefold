$(function(){function e(e,t){for(var a in m)e+","+t==m[a]&&(e+=1e-4,t+=1e-4);return m.push(e+","+t),m.sort(),new google.maps.LatLng(e,t)}function t(t,a,n){var l=e(parseFloat(a.lat),parseFloat(a.lon)),r="589b5a";"forecast"==a.status&&(r="ffff00");var s=new google.maps.Marker({position:l,map:o,cursor:"pointer",icon:"https://chart.apis.google.com/chart?cht=d&chdp=mapsapi&chl=pin%27i%5c%27%5b%27-2%27f%5chv%27a%5c%5dh%5c%5do%5c"+r+"%27fC%5c000000%27tC%5c000000%27eC%5cLauto%27f%5c&ext=.png"});p.push(s);var i=(new google.maps.Circle({strokeColor:"#5e98e0",strokeOpacity:1,strokeWeight:2,fillColor:"#5e98e0",fillOpacity:.1+.4*parseInt(a.network_speed)/n,map:o,center:l,radius:2*Math.sqrt(a.cu_max*a.su_max*a.tu_max)}),$("#markerContentSource").clone());$(i).attr("id",""),$(i).find("h1").html(t.name),$(i).find("h2").html(a.name),$(i).find(".netspeed").html(a.network_speed+" Mbps"),$(i).find(".ipv4").html(a.ipv4_enable?"Yes":"No"),$(i).find(".ipv6").html(a.ipv6_enable?"Yes":"No"),$(i).find(".currency").html(a.pricing_currency),$(i).find(".planned-cu").html(a.cu_planned),$(i).find(".planned-su").html(a.su_planned),$(i).find(".planned-tu").html(a.tu_planned),$(i).find(".max-cu").html(a.cu_max),$(i).find(".max-su").html(a.su_max),$(i).find(".max-tu").html(a.tu_max);for(var m=0;m<a.pricing.length;m++){var u=a.pricing[m],f=$("<tr>");f.append($("<td>").html("Price ("+u.months+" months)")),f.append($("<td>").html(u.cu)),f.append($("<td>").html(u.su)),f.append($("<td>").html(u.tu)),$(i).find(".pricing").append(f)}d.addMarker(s),google.maps.event.addListener(s,"spider_click",function(){c&&c.close(),c=new google.maps.InfoWindow({content:i[0].innerHTML}),google.maps.event.addListener(o,"closeclick",function(){c=null}),c.open(o,s)})}if(0!=$("#map-canvas").length){$("head").append($("<style></style>").text("#bodyContent table { width: 100%; }"));var a=function(e){var t=RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))},n=a("lat"),l=a("lon"),r=n&&l?new google.maps.LatLng(parseFloat(n),parseFloat(l)):new google.maps.LatLng(50.623211,4.438007),s=parseInt(a("zoom")||"2"),i={scrollwheel:!1,zoom:s,center:r,styles:[{featureType:"administrative",elementType:"all",stylers:[{saturation:"-100"}]},{featureType:"administrative.province",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",elementType:"all",stylers:[{saturation:-100},{lightness:"50"},{visibility:"simplified"}]},{featureType:"road",elementType:"all",stylers:[{saturation:"-100"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"all",stylers:[{lightness:"30"}]},{featureType:"road.local",elementType:"all",stylers:[{lightness:"40"}]},{featureType:"transit",elementType:"all",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"water",elementType:"geometry",stylers:[{hue:"#ffff00"},{lightness:-25},{saturation:-97}]},{featureType:"water",elementType:"labels",stylers:[{lightness:-25},{saturation:-100}]},{featureType:"administrative.country",elementType:"all",stylers:[{visibility:"off"}]}]},o=new google.maps.Map(document.getElementById("map-canvas"),i),p={},c=null,c=((new Date).getTime(),null),p=[],m=[],d=null;!function(e,a){var n=globalcapacity;d=new OverlappingMarkerSpiderfier(o,{markersWontMove:!0,markersWontHide:!0,basicFormatEvents:!0});for(var l=0,r=0;r<n.length;r++)for(var s=0;s<n[r].resourcepools.length;s++){var i=parseInt(n[r].resourcepools[s].network_speed);i>l&&(l=i)}for(var r=0;r<n.length;r++)for(var s=0;s<n[r].resourcepools.length;s++)t(n[r],n[r].resourcepools[s],l)}()}});